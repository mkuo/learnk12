{% load humanize learnk12_tags wagtailimages_tags %}

{% if value.heading %}
    <h1 class="mt-5 mb-2 text-dark">
        {% if value.link %}
            <a href="{{ value.link.url }}" class="text-dark text-decoration-none">{{ value.heading }}</a>
        {% else %}
            {{ value.heading }}
        {% endif %}
    </h1>
{% endif %}
{% if value.caption %}
    <p class="lead">{{ value.caption }}</p>
{% endif %}
<div class="table-responsive">
    <table class="table table-hover border-bottom">
        <thead class="thead-light">
            <tr>
                <th></th>
                <th>Course</th>
                <th class="d-none d-md-table-cell">Difficulty</th>
                <th class="d-none d-md-table-cell">Provider</th>
                <th class="text-right">Reviews</th>
            </tr>
        </thead>
        <tbody>
            {% for page in courses %}
                {# transform defines containing block for stretched-link #}
                <tr style="transform: rotate(0);">
                    <th>{{ forloop.counter }}</th>
                    <td>
                        <a href="{{ page.url }}" class="stretched-link font-weight-bold darkslategray">
                            {{ page.title }}
                        </a>
                        {% if page.tags %}
                            <div>
                                {% for tag in page.tags.all %}
                                    <span class="badge badge-pill badge-info">{{ tag }}</span>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </td>
                    {% with page.difficulty|course_difficulty as difficulty_content %}
                    <td class="d-none d-md-table-cell">
                        <div>{{ difficulty_content.label }}</div>
                        <div class="text-nowrap mt-n2">
                            {% spaceless %}
                            <span class="text-info">{{ difficulty_content.dashes_filled }}</span>
                            <span class="text-muted">{{ difficulty_content.dashes_empty }}</span>
                            {% endspaceless %}
                        </div>
                    </td>
                    {% endwith %}
                    <td class="d-none d-md-table-cell">{{ page.provider }}</td>
                    <td>
                        {% include 'home/page_star_rating.html' with inline=False %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>