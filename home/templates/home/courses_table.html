{% load humanize learnk12_tags wagtailimages_tags %}

{% if paged %}
    <small class="text-muted">
        {{ paging_data.num_records }} result{{ paging_data.num_records | pluralize }} returned
    </small>
{% endif %}
<div class="list-group">
    {% for page in courses %}
        <a href="{{ page.url }}" class="list-group-item list-group-item-action py-3">
            <div class="d-flex flex-row align-items-center row">
                {% with page.course_images.all|first as first_image %}
                    {% if first_image %}
                        <div class="col-auto my-1 px-0 ml-3 mr-2">
                            {% image first_image.image fill-240x160 class="img-fluid rounded border shadow-sm" %}
                        </div>
                    {% endif %}
                {% endwith %}
                <div class="col my-1 p-0 mx-3">
                    <h2 class="mb-1">{{ page.title }}</h2>
                    {% if page.tags %}
                        <div>
                            {% for tag in page.tags.all %}
                                <span class="badge badge-pill badge-info">{{ tag | title }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% if page.review_count %}
                        <div class="d-inline-block text-nowrap">
                            {% for icon in page.avg_score|get_stars %}
                                <i class="material-icons md-narrow align-middle text-warning">{{ icon }}</i>
                            {% endfor %}
                        </div>
                        <div class="d-inline-block text-nowrap align-middle ml-1">
                            {{ page.review_count }} review{{ page.review_count | pluralize }}
                        </div>
                    {% endif %}
                    <p class="my-1">{{ page.snippet|truncatewords:48 }}</p>
                    {% include 'home/page_summary.html' with div_inline=True%}
                </div>
            </div>
        </a>
    {% empty %}
        {% if paged %}
            <p class="border text-center py-5">No courses were returned. Please try updating your filters. ðŸ˜Š</p>
        {% endif %}
    {% endfor %}
</div>
